{"ast":null,"code":"import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/extends';\nimport * as primitives from '@react-pdf/primitives';\nexport * from '@react-pdf/primitives';\nimport React, { useRef, useState, useEffect } from 'react';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport BlobStream from 'blob-stream';\nimport FontStore from '@react-pdf/font';\nimport renderPDF from '@react-pdf/render';\nimport PDFDocument from '@react-pdf/pdfkit';\nimport layoutDocument from '@react-pdf/layout';\nimport ReactFiberReconciler from 'react-reconciler';\nimport { unstable_scheduleCallback, unstable_cancelCallback } from 'scheduler';\n\n/* eslint-disable no-continue */\n\n/**\n * Checks if two sets of props are equal (recursively)\n *\n * @param {Object} props A\n * @param {Object} props B\n * @returns {Boolean} props equals?\n *\n */\nvar propsEqual = function propsEqual(a, b) {\n  var oldPropsKeys = Object.keys(a);\n  var newPropsKeys = Object.keys(b);\n  if (oldPropsKeys.length !== newPropsKeys.length) {\n    return false;\n  }\n  for (var i = 0; i < oldPropsKeys.length; i += 1) {\n    var propName = oldPropsKeys[i];\n    if (propName === 'render' && !a[propName] !== !b[propName]) {\n      return false;\n    }\n    if (propName !== 'children' && a[propName] !== b[propName]) {\n      if (typeof a[propName] === 'object' && typeof b[propName] === 'object' && propsEqual(a[propName], b[propName])) {\n        continue;\n      }\n      return false;\n    }\n    if (propName === 'children' && (typeof a[propName] === 'string' || typeof b[propName] === 'string')) {\n      return a[propName] === b[propName];\n    }\n  }\n  return true;\n};\nvar emptyObject = {};\nvar createRenderer = function createRenderer(_ref) {\n  var _ref$onChange = _ref.onChange,\n    onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange;\n  return ReactFiberReconciler({\n    schedulePassiveEffects: unstable_scheduleCallback,\n    cancelPassiveEffects: unstable_cancelCallback,\n    supportsMutation: true,\n    isPrimaryRenderer: false,\n    warnsIfNotActing: false,\n    appendInitialChild: function appendInitialChild(parentInstance, child) {\n      parentInstance.children.push(child);\n    },\n    createInstance: function createInstance(type, _ref2) {\n      var style = _ref2.style;\n      _ref2.children;\n      var props = _objectWithoutPropertiesLoose(_ref2, [\"style\", \"children\"]);\n      return {\n        type: type,\n        box: {},\n        style: style || {},\n        props: props || {},\n        children: []\n      };\n    },\n    createTextInstance: function createTextInstance(text, rootContainerInstance) {\n      return {\n        type: 'TEXT_INSTANCE',\n        value: text\n      };\n    },\n    finalizeInitialChildren: function finalizeInitialChildren(element, type, props) {\n      return false;\n    },\n    getPublicInstance: function getPublicInstance(instance) {\n      return instance;\n    },\n    prepareForCommit: function prepareForCommit() {// Noop\n    },\n    clearContainer: function clearContainer() {// Noop\n    },\n    prepareUpdate: function prepareUpdate(element, type, oldProps, newProps) {\n      return !propsEqual(oldProps, newProps);\n    },\n    resetAfterCommit: onChange,\n    resetTextContent: function resetTextContent(element) {// Noop\n    },\n    getRootHostContext: function getRootHostContext() {\n      return emptyObject;\n    },\n    getChildHostContext: function getChildHostContext() {\n      return emptyObject;\n    },\n    shouldSetTextContent: function shouldSetTextContent(type, props) {\n      return false;\n    },\n    now: Date.now,\n    useSyncScheduling: true,\n    appendChild: function appendChild(parentInstance, child) {\n      parentInstance.children.push(child);\n    },\n    appendChildToContainer: function appendChildToContainer(parentInstance, child) {\n      if (parentInstance.type === 'ROOT') {\n        parentInstance.document = child;\n      } else {\n        parentInstance.children.push(child);\n      }\n    },\n    insertBefore: function insertBefore(parentInstance, child, beforeChild) {\n      var _parentInstance$child;\n      var index = (_parentInstance$child = parentInstance.children) === null || _parentInstance$child === void 0 ? void 0 : _parentInstance$child.indexOf(beforeChild);\n      if (index === undefined) return;\n      if (index !== -1 && child) parentInstance.children.splice(index, 0, child);\n    },\n    removeChild: function removeChild(parentInstance, child) {\n      var _parentInstance$child2;\n      var index = (_parentInstance$child2 = parentInstance.children) === null || _parentInstance$child2 === void 0 ? void 0 : _parentInstance$child2.indexOf(child);\n      if (index === undefined) return;\n      if (index !== -1) parentInstance.children.splice(index, 1);\n    },\n    removeChildFromContainer: function removeChildFromContainer(parentInstance, child) {\n      var _parentInstance$child3;\n      var index = (_parentInstance$child3 = parentInstance.children) === null || _parentInstance$child3 === void 0 ? void 0 : _parentInstance$child3.indexOf(child);\n      if (index === undefined) return;\n      if (index !== -1) parentInstance.children.splice(index, 1);\n    },\n    commitTextUpdate: function commitTextUpdate(textInstance, oldText, newText) {\n      textInstance.value = newText;\n    },\n    commitUpdate: function commitUpdate(instance, updatePayload, type, oldProps, newProps) {\n      var style = newProps.style,\n        props = _objectWithoutPropertiesLoose(newProps, [\"style\"]);\n      instance.props = props;\n      instance.style = style;\n    }\n  });\n};\nvar version = \"2.0.5\";\nvar fontStore = new FontStore(); // We must keep a single renderer instance, otherwise React will complain\n\nvar renderer; // The pdf instance acts as an event emmiter for DOM usage.\n// We only want to trigger an update then PDF content changes\n\nvar events = {};\nvar pdf = function pdf(initialValue) {\n  var onChange = function onChange() {\n    var _events$change;\n    var listeners = ((_events$change = events.change) === null || _events$change === void 0 ? void 0 : _events$change.slice()) || [];\n    for (var i = 0; i < listeners.length; i += 1) {\n      listeners[i]();\n    }\n  };\n  var container = {\n    type: 'ROOT',\n    document: null\n  };\n  renderer = renderer || createRenderer({\n    onChange: onChange\n  });\n  var mountNode = renderer.createContainer(container);\n  var updateContainer = function updateContainer(doc) {\n    renderer.updateContainer(doc, mountNode, null);\n  };\n  if (initialValue) updateContainer(initialValue);\n  var render = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(compress) {\n      var _ref2, pdfVersion, ctx, layout;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (compress === void 0) {\n                compress = true;\n              }\n              _ref2 = container.document.props || {}, pdfVersion = _ref2.pdfVersion;\n              ctx = new PDFDocument({\n                compress: compress,\n                autoFirstPage: false,\n                displayTitle: true,\n                pdfVersion: pdfVersion\n              });\n              _context.next = 5;\n              return layoutDocument(container.document, fontStore);\n            case 5:\n              layout = _context.sent;\n              return _context.abrupt(\"return\", renderPDF(ctx, layout));\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return function render(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var callOnRender = function callOnRender(params) {\n    if (params === void 0) {\n      params = {};\n    }\n    if (container.document.props.onRender) {\n      container.document.props.onRender(params);\n    }\n  };\n  var toBlob = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var instance, stream;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return render();\n            case 2:\n              instance = _context2.sent;\n              stream = instance.pipe(BlobStream());\n              return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                stream.on('finish', function () {\n                  try {\n                    var blob = stream.toBlob('application/pdf');\n                    callOnRender({\n                      blob: blob\n                    });\n                    resolve(blob);\n                  } catch (error) {\n                    reject(error);\n                  }\n                });\n                stream.on('error', reject);\n              }));\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return function toBlob() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var toBuffer = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              callOnRender();\n              return _context3.abrupt(\"return\", render());\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return function toBuffer() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var toString = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var result, instance;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              result = '';\n              _context4.next = 3;\n              return render(false);\n            case 3:\n              instance = _context4.sent;\n              return _context4.abrupt(\"return\", new Promise(function (resolve, reject) {\n                try {\n                  instance.on('data', function (buffer) {\n                    result += buffer;\n                  });\n                  instance.on('end', function () {\n                    callOnRender();\n                    resolve(result);\n                  });\n                } catch (error) {\n                  reject(error);\n                }\n              }));\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return function toString() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var on = function on(event, listener) {\n    if (!events[event]) events[event] = [];\n    events[event].push(listener);\n  };\n  var removeListener = function removeListener(event, listener) {\n    if (!events[event]) return;\n    var idx = events[event].indexOf(listener);\n    if (idx > -1) events[event].splice(idx, 1);\n  };\n  return {\n    on: on,\n    container: container,\n    toBlob: toBlob,\n    toBuffer: toBuffer,\n    toString: toString,\n    removeListener: removeListener,\n    updateContainer: updateContainer\n  };\n};\nvar Font = fontStore;\nvar StyleSheet = {\n  create: function create(s) {\n    return s;\n  }\n};\nvar queue = require('queue');\nvar usePDF = function usePDF(_ref) {\n  var document = _ref.document;\n  var pdfInstance = useRef(null);\n  var previousUrl = useRef(null);\n  var _useState = useState({\n      url: null,\n      blob: null,\n      error: null,\n      loading: false\n    }),\n    state = _useState[0],\n    setState = _useState[1]; // Setup rendering queue\n\n  useEffect(function () {\n    var renderQueue = queue({\n      autostart: true,\n      concurrency: 1\n    });\n    var queueDocumentRender = function queueDocumentRender() {\n      setState(function (prev) {\n        return _extends({}, prev, {\n          loading: true\n        });\n      });\n      renderQueue.splice(0, renderQueue.length, function () {\n        return state.error ? Promise.resolve() : pdfInstance.current.toBlob();\n      });\n    };\n    var onRenderFailed = function onRenderFailed(error) {\n      console.error(error);\n      setState(function (prev) {\n        return _extends({}, prev, {\n          error: error\n        });\n      });\n    };\n    var onRenderSuccessful = function onRenderSuccessful(blob) {\n      previousUrl.current = state.url;\n      setState({\n        blob: blob,\n        error: null,\n        loading: false,\n        url: URL.createObjectURL(blob)\n      });\n    };\n    pdfInstance.current = pdf();\n    pdfInstance.current.on('change', queueDocumentRender);\n    pdfInstance.current.updateContainer(document);\n    renderQueue.on('error', onRenderFailed);\n    renderQueue.on('success', onRenderSuccessful);\n    return function () {\n      renderQueue.end();\n    };\n  }, []); // Revoke old unused url instances\n\n  useEffect(function () {\n    if (previousUrl.current) URL.revokeObjectURL(previousUrl.current);\n  }, [state.blob]);\n  var update = function update() {\n    pdfInstance.current.updateContainer(document);\n  };\n  return [state, update];\n};\nvar BlobProvider = function BlobProvider(_ref2) {\n  var doc = _ref2.document,\n    children = _ref2.children;\n  var _usePDF = usePDF({\n      document: document\n    }),\n    instance = _usePDF[0],\n    updateInstance = _usePDF[1];\n  useEffect(updateInstance, [doc]);\n  if (!doc) {\n    console.warn('You should pass a valid document to BlobProvider');\n    return null;\n  }\n  return children(instance);\n};\nvar PDFViewer = function PDFViewer(_ref3) {\n  var title = _ref3.title,\n    style = _ref3.style,\n    className = _ref3.className,\n    children = _ref3.children,\n    innerRef = _ref3.innerRef,\n    props = _objectWithoutPropertiesLoose(_ref3, [\"title\", \"style\", \"className\", \"children\", \"innerRef\"]);\n  var _usePDF2 = usePDF({\n      document: children\n    }),\n    instance = _usePDF2[0],\n    updateInstance = _usePDF2[1];\n  useEffect(updateInstance, [children]);\n  return /*#__PURE__*/React.createElement(\"iframe\", _extends({\n    title: title,\n    ref: innerRef,\n    style: style,\n    src: instance.url,\n    className: className\n  }, props));\n};\nvar PDFDownloadLink = function PDFDownloadLink(_ref4) {\n  var style = _ref4.style,\n    children = _ref4.children,\n    className = _ref4.className,\n    doc = _ref4.document,\n    _ref4$fileName = _ref4.fileName,\n    fileName = _ref4$fileName === void 0 ? 'document.pdf' : _ref4$fileName;\n  var _usePDF3 = usePDF({\n      document: doc\n    }),\n    instance = _usePDF3[0],\n    updateInstance = _usePDF3[1];\n  useEffect(updateInstance, [children]);\n  if (!doc) {\n    console.warn('You should pass a valid document to PDFDownloadLink');\n    return null;\n  }\n  var handleDownloadIE = function handleDownloadIE() {\n    if (window.navigator.msSaveBlob) {\n      // IE\n      window.navigator.msSaveBlob(instance.blob, fileName);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"a\", {\n    style: style,\n    href: instance.url,\n    download: fileName,\n    className: className,\n    onClick: handleDownloadIE\n  }, typeof children === 'function' ? children(instance) : children);\n};\nvar throwEnvironmentError = function throwEnvironmentError(name) {\n  throw new Error(name + \" is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.\");\n};\nvar renderToStream = function renderToStream() {\n  throwEnvironmentError('renderToStream');\n};\nvar renderToString = function renderToString() {\n  throwEnvironmentError('renderToString');\n};\nvar renderToFile = function renderToFile() {\n  throwEnvironmentError('renderToFile');\n};\nvar render = function render() {\n  throwEnvironmentError('render');\n};\nvar dom = _extends({\n  pdf: pdf,\n  usePDF: usePDF,\n  Font: Font,\n  version: version,\n  StyleSheet: StyleSheet,\n  PDFViewer: PDFViewer,\n  BlobProvider: BlobProvider,\n  PDFDownloadLink: PDFDownloadLink,\n  renderToStream: renderToStream,\n  renderToString: renderToString,\n  renderToFile: renderToFile,\n  render: render\n}, primitives);\nexport default dom;\nexport { BlobProvider, Font, PDFDownloadLink, PDFViewer, StyleSheet, createRenderer, pdf, render, renderToFile, renderToStream, renderToString, usePDF, version };","map":{"version":3,"names":["propsEqual","a","b","oldPropsKeys","Object","keys","newPropsKeys","length","i","propName","emptyObject","createRenderer","_ref","_ref$onChange","onChange","ReactFiberReconciler","schedulePassiveEffects","unstable_scheduleCallback","cancelPassiveEffects","unstable_cancelCallback","supportsMutation","isPrimaryRenderer","warnsIfNotActing","appendInitialChild","parentInstance","child","children","push","createInstance","type","_ref2","style","props","_objectWithoutPropertiesLoose","box","createTextInstance","text","rootContainerInstance","value","finalizeInitialChildren","element","getPublicInstance","instance","prepareForCommit","clearContainer","prepareUpdate","oldProps","newProps","resetAfterCommit","resetTextContent","getRootHostContext","getChildHostContext","shouldSetTextContent","now","Date","useSyncScheduling","appendChild","appendChildToContainer","document","insertBefore","beforeChild","_parentInstance$child","index","indexOf","undefined","splice","removeChild","_parentInstance$child2","removeChildFromContainer","_parentInstance$child3","commitTextUpdate","textInstance","oldText","newText","commitUpdate","updatePayload","fontStore","FontStore","renderer","events","pdf","initialValue","_events$change","listeners","change","slice","container","mountNode","createContainer","updateContainer","doc","render","_asyncToGenerator","_regeneratorRuntime","mark","_callee","compress","pdfVersion","ctx","layout","wrap","_callee$","_context","prev","next","PDFDocument","autoFirstPage","displayTitle","layoutDocument","sent","abrupt","renderPDF","stop","_x","apply","arguments","callOnRender","params","onRender","toBlob","_ref3","_callee2","stream","_callee2$","_context2","pipe","BlobStream","Promise","resolve","reject","on","blob","error","toBuffer","_ref4","_callee3","_callee3$","_context3","toString","_ref5","_callee4","result","_callee4$","_context4","buffer","event","listener","removeListener","idx","Font","StyleSheet","create","s","queue","require","usePDF","pdfInstance","useRef","previousUrl","_useState","useState","url","loading","state","setState","useEffect","renderQueue","autostart","concurrency","queueDocumentRender","_extends","current","onRenderFailed","console","onRenderSuccessful","URL","createObjectURL","end","revokeObjectURL","update","BlobProvider","_usePDF","updateInstance","warn","PDFViewer","title","className","innerRef","_usePDF2","React","createElement","ref","src","PDFDownloadLink","_ref4$fileName","fileName","_usePDF3","handleDownloadIE","window","navigator","msSaveBlob","href","download","onClick","throwEnvironmentError","name","Error","renderToStream","renderToString","renderToFile","dom","version","primitives"],"sources":["../src/propsEqual.js","../src/renderer.js","../src/index.js","../src/dom.js"],"sourcesContent":["/* eslint-disable no-continue */\n\n/**\n * Checks if two sets of props are equal (recursively)\n *\n * @param {Object} props A\n * @param {Object} props B\n * @returns {Boolean} props equals?\n *\n */\nconst propsEqual = (a, b) => {\n  const oldPropsKeys = Object.keys(a);\n  const newPropsKeys = Object.keys(b);\n\n  if (oldPropsKeys.length !== newPropsKeys.length) {\n    return false;\n  }\n\n  for (let i = 0; i < oldPropsKeys.length; i += 1) {\n    const propName = oldPropsKeys[i];\n\n    if (propName === 'render' && !a[propName] !== !b[propName]) {\n      return false;\n    }\n\n    if (propName !== 'children' && a[propName] !== b[propName]) {\n      if (\n        typeof a[propName] === 'object' &&\n        typeof b[propName] === 'object' &&\n        propsEqual(a[propName], b[propName])\n      ) {\n        continue;\n      }\n\n      return false;\n    }\n\n    if (\n      propName === 'children' &&\n      (typeof a[propName] === 'string' || typeof b[propName] === 'string')\n    ) {\n      return a[propName] === b[propName];\n    }\n  }\n\n  return true;\n};\n\nexport default propsEqual;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable no-param-reassign */\n\nimport ReactFiberReconciler from 'react-reconciler';\nimport {\n  unstable_scheduleCallback as schedulePassiveEffects,\n  unstable_cancelCallback as cancelPassiveEffects,\n} from 'scheduler';\n\nimport propsEqual from './propsEqual';\n\nconst emptyObject = {};\n\nconst createRenderer = ({ onChange = () => {} }) => {\n  return ReactFiberReconciler({\n    schedulePassiveEffects,\n\n    cancelPassiveEffects,\n\n    supportsMutation: true,\n\n    isPrimaryRenderer: false,\n\n    warnsIfNotActing: false,\n\n    appendInitialChild(parentInstance, child) {\n      parentInstance.children.push(child);\n    },\n\n    createInstance(type, { style, children, ...props }) {\n      return {\n        type,\n        box: {},\n        style: style || {},\n        props: props || {},\n        children: [],\n      };\n    },\n\n    createTextInstance(text, rootContainerInstance) {\n      return { type: 'TEXT_INSTANCE', value: text };\n    },\n\n    finalizeInitialChildren(element, type, props) {\n      return false;\n    },\n\n    getPublicInstance(instance) {\n      return instance;\n    },\n\n    prepareForCommit() {\n      // Noop\n    },\n\n    clearContainer() {\n      // Noop\n    },\n\n    prepareUpdate(element, type, oldProps, newProps) {\n      return !propsEqual(oldProps, newProps);\n    },\n\n    resetAfterCommit: onChange,\n\n    resetTextContent(element) {\n      // Noop\n    },\n\n    getRootHostContext() {\n      return emptyObject;\n    },\n\n    getChildHostContext() {\n      return emptyObject;\n    },\n\n    shouldSetTextContent(type, props) {\n      return false;\n    },\n\n    now: Date.now,\n\n    useSyncScheduling: true,\n\n    appendChild(parentInstance, child) {\n      parentInstance.children.push(child);\n    },\n\n    appendChildToContainer(parentInstance, child) {\n      if (parentInstance.type === 'ROOT') {\n        parentInstance.document = child;\n      } else {\n        parentInstance.children.push(child);\n      }\n    },\n\n    insertBefore(parentInstance, child, beforeChild) {\n      const index = parentInstance.children?.indexOf(beforeChild);\n\n      if (index === undefined) return;\n\n      if (index !== -1 && child)\n        parentInstance.children.splice(index, 0, child);\n    },\n\n    removeChild(parentInstance, child) {\n      const index = parentInstance.children?.indexOf(child);\n\n      if (index === undefined) return;\n\n      if (index !== -1) parentInstance.children.splice(index, 1);\n    },\n\n    removeChildFromContainer(parentInstance, child) {\n      const index = parentInstance.children?.indexOf(child);\n\n      if (index === undefined) return;\n\n      if (index !== -1) parentInstance.children.splice(index, 1);\n    },\n\n    commitTextUpdate(textInstance, oldText, newText) {\n      textInstance.value = newText;\n    },\n\n    commitUpdate(instance, updatePayload, type, oldProps, newProps) {\n      const { style, ...props } = newProps;\n      instance.props = props;\n      instance.style = style;\n    },\n  });\n};\n\nexport default createRenderer;\n","import BlobStream from 'blob-stream';\nimport FontStore from '@react-pdf/font';\nimport renderPDF from '@react-pdf/render';\nimport PDFDocument from '@react-pdf/pdfkit';\nimport layoutDocument from '@react-pdf/layout';\n\nimport createRenderer from './renderer';\nimport { version } from '../package.json';\n\nconst fontStore = new FontStore();\n\n// We must keep a single renderer instance, otherwise React will complain\nlet renderer;\n\n// The pdf instance acts as an event emmiter for DOM usage.\n// We only want to trigger an update then PDF content changes\nconst events = {};\n\nconst pdf = initialValue => {\n  const onChange = () => {\n    const listeners = events.change?.slice() || [];\n    for (let i = 0; i < listeners.length; i += 1) listeners[i]();\n  };\n\n  const container = { type: 'ROOT', document: null };\n  renderer = renderer || createRenderer({ onChange });\n  const mountNode = renderer.createContainer(container);\n\n  const updateContainer = doc => {\n    renderer.updateContainer(doc, mountNode, null);\n  };\n\n  if (initialValue) updateContainer(initialValue);\n\n  const render = async (compress = true) => {\n    const { pdfVersion } = container.document.props || {};\n\n    const ctx = new PDFDocument({\n      compress,\n      autoFirstPage: false,\n      displayTitle: true,\n      pdfVersion,\n    });\n\n    const layout = await layoutDocument(container.document, fontStore);\n\n    return renderPDF(ctx, layout);\n  };\n\n  const callOnRender = (params = {}) => {\n    if (container.document.props.onRender) {\n      container.document.props.onRender(params);\n    }\n  };\n\n  const toBlob = async () => {\n    const instance = await render();\n    const stream = instance.pipe(BlobStream());\n\n    return new Promise((resolve, reject) => {\n      stream.on('finish', () => {\n        try {\n          const blob = stream.toBlob('application/pdf');\n          callOnRender({ blob });\n          resolve(blob);\n        } catch (error) {\n          reject(error);\n        }\n      });\n\n      stream.on('error', reject);\n    });\n  };\n\n  const toBuffer = async () => {\n    callOnRender();\n    return render();\n  };\n\n  const toString = async () => {\n    let result = '';\n    const instance = await render(false); // For some reason, when rendering to string if compress=true the document is blank\n\n    return new Promise((resolve, reject) => {\n      try {\n        instance.on('data', buffer => {\n          result += buffer;\n        });\n\n        instance.on('end', () => {\n          callOnRender();\n          resolve(result);\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n\n  const on = (event, listener) => {\n    if (!events[event]) events[event] = [];\n    events[event].push(listener);\n  };\n\n  const removeListener = (event, listener) => {\n    if (!events[event]) return;\n    const idx = events[event].indexOf(listener);\n    if (idx > -1) events[event].splice(idx, 1);\n  };\n\n  return {\n    on,\n    container,\n    toBlob,\n    toBuffer,\n    toString,\n    removeListener,\n    updateContainer,\n  };\n};\n\nconst Font = fontStore;\n\nconst StyleSheet = {\n  create: s => s,\n};\n\nexport { version, Font, StyleSheet, pdf, createRenderer };\n","/* eslint-disable no-console */\n/* eslint-disable react/jsx-props-no-spreading */\n\nimport * as primitives from '@react-pdf/primitives';\nimport React, { useEffect, useRef, useState } from 'react';\n\nimport { pdf, version, Font, StyleSheet } from './index';\n\nconst queue = require('queue');\n\nexport const usePDF = ({ document }) => {\n  const pdfInstance = useRef(null);\n\n  const previousUrl = useRef(null);\n\n  const [state, setState] = useState({\n    url: null,\n    blob: null,\n    error: null,\n    loading: false,\n  });\n\n  // Setup rendering queue\n  useEffect(() => {\n    const renderQueue = queue({ autostart: true, concurrency: 1 });\n\n    const queueDocumentRender = () => {\n      setState(prev => ({ ...prev, loading: true }));\n\n      renderQueue.splice(0, renderQueue.length, () =>\n        state.error ? Promise.resolve() : pdfInstance.current.toBlob(),\n      );\n    };\n\n    const onRenderFailed = error => {\n      console.error(error);\n      setState(prev => ({ ...prev, error }));\n    };\n\n    const onRenderSuccessful = blob => {\n      previousUrl.current = state.url;\n\n      setState({\n        blob,\n        error: null,\n        loading: false,\n        url: URL.createObjectURL(blob),\n      });\n    };\n\n    pdfInstance.current = pdf();\n    pdfInstance.current.on('change', queueDocumentRender);\n    pdfInstance.current.updateContainer(document);\n\n    renderQueue.on('error', onRenderFailed);\n    renderQueue.on('success', onRenderSuccessful);\n\n    return () => {\n      renderQueue.end();\n    };\n  }, []);\n\n  // Revoke old unused url instances\n  useEffect(() => {\n    if (previousUrl.current) URL.revokeObjectURL(previousUrl.current);\n  }, [state.blob]);\n\n  const update = () => {\n    pdfInstance.current.updateContainer(document);\n  };\n\n  return [state, update];\n};\n\nexport const BlobProvider = ({ document: doc, children }) => {\n  const [instance, updateInstance] = usePDF({ document });\n\n  useEffect(updateInstance, [doc]);\n\n  if (!doc) {\n    console.warn('You should pass a valid document to BlobProvider');\n    return null;\n  }\n\n  return children(instance);\n};\n\nexport const PDFViewer = ({\n  title,\n  style,\n  className,\n  children,\n  innerRef,\n  ...props\n}) => {\n  const [instance, updateInstance] = usePDF({ document: children });\n\n  useEffect(updateInstance, [children]);\n\n  return (\n    <iframe\n      title={title}\n      ref={innerRef}\n      style={style}\n      src={instance.url}\n      className={className}\n      {...props}\n    />\n  );\n};\n\nexport const PDFDownloadLink = ({\n  style,\n  children,\n  className,\n  document: doc,\n  fileName = 'document.pdf',\n}) => {\n  const [instance, updateInstance] = usePDF({ document: doc });\n\n  useEffect(updateInstance, [children]);\n\n  if (!doc) {\n    console.warn('You should pass a valid document to PDFDownloadLink');\n    return null;\n  }\n\n  const handleDownloadIE = () => {\n    if (window.navigator.msSaveBlob) {\n      // IE\n      window.navigator.msSaveBlob(instance.blob, fileName);\n    }\n  };\n\n  return (\n    <a\n      style={style}\n      href={instance.url}\n      download={fileName}\n      className={className}\n      onClick={handleDownloadIE}\n    >\n      {typeof children === 'function' ? children(instance) : children}\n    </a>\n  );\n};\n\nconst throwEnvironmentError = name => {\n  throw new Error(\n    `${name} is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.`,\n  );\n};\n\nexport const renderToStream = () => {\n  throwEnvironmentError('renderToStream');\n};\n\nexport const renderToString = () => {\n  throwEnvironmentError('renderToString');\n};\n\nexport const renderToFile = () => {\n  throwEnvironmentError('renderToFile');\n};\n\nexport const render = () => {\n  throwEnvironmentError('render');\n};\n\nexport * from './index';\n\nexport * from '@react-pdf/primitives';\n\nexport default {\n  pdf,\n  usePDF,\n  Font,\n  version,\n  StyleSheet,\n  PDFViewer,\n  BlobProvider,\n  PDFDownloadLink,\n  renderToStream,\n  renderToString,\n  renderToFile,\n  render,\n  ...primitives,\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nexports.__esModule = true;\nexports.default = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar R = _interopRequireWildcard(require(\"ramda\"));\nvar P = _interopRequireWildcard(require(\"@react-pdf/primitives\"));\nvar _attributedString = _interopRequireDefault(require(\"@react-pdf/textkit/lib/attributedString\"));\nvar _emoji = require(\"./emoji\");\nvar _ignoreChars = _interopRequireDefault(require(\"./ignoreChars\"));\nvar _transformText = _interopRequireDefault(require(\"./transformText\"));\nvar PREPROCESSORS = [_ignoreChars.default, _emoji.embedEmojis];\nvar isType = R.propEq('type');\nvar isImage = isType(P.Image);\nvar isTextInstance = isType(P.TextInstance);\n/**\n * Get textkit fragments of given node object\n *\n * @param {Object} font store\n * @param {Object} instance node\n * @returns {Array} text fragments\n */\n\nvar getFragments = function getFragments(fontStore, instance, parentLink, level) {\n  var _instance$props, _instance$props2;\n  if (level === void 0) {\n    level = 0;\n  }\n  if (!instance) return [{\n    string: ''\n  }];\n  var fragments = [];\n  var _instance$style = instance.style,\n    _instance$style$color = _instance$style.color,\n    color = _instance$style$color === void 0 ? 'black' : _instance$style$color,\n    _instance$style$fontF = _instance$style.fontFamily,\n    fontFamily = _instance$style$fontF === void 0 ? 'Helvetica' : _instance$style$fontF,\n    fontWeight = _instance$style.fontWeight,\n    fontStyle = _instance$style.fontStyle,\n    _instance$style$fontS = _instance$style.fontSize,\n    fontSize = _instance$style$fontS === void 0 ? 18 : _instance$style$fontS,\n    _instance$style$textA = _instance$style.textAlign,\n    textAlign = _instance$style$textA === void 0 ? 'left' : _instance$style$textA,\n    lineHeight = _instance$style.lineHeight,\n    textDecoration = _instance$style.textDecoration,\n    textDecorationColor = _instance$style.textDecorationColor,\n    textDecorationStyle = _instance$style.textDecorationStyle,\n    textTransform = _instance$style.textTransform,\n    letterSpacing = _instance$style.letterSpacing,\n    textIndent = _instance$style.textIndent,\n    opacity = _instance$style.opacity;\n  var opts = {\n    fontFamily: fontFamily,\n    fontWeight: fontWeight,\n    fontStyle: fontStyle\n  };\n  var obj = fontStore ? fontStore.getFont(opts) : null;\n  var font = obj ? obj.data : fontFamily; // Don't pass main background color to textkit. Will be rendered by the render package instead\n\n  var backgroundColor = level === 0 ? null : instance.style.backgroundColor;\n  var attributes = {\n    font: font,\n    color: color,\n    opacity: opacity,\n    fontSize: fontSize,\n    backgroundColor: backgroundColor,\n    align: textAlign,\n    indent: textIndent,\n    characterSpacing: letterSpacing,\n    strikeStyle: textDecorationStyle,\n    underlineStyle: textDecorationStyle,\n    underline: textDecoration === 'underline' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strike: textDecoration === 'line-through' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strikeColor: textDecorationColor || color,\n    underlineColor: textDecorationColor || color,\n    link: parentLink || ((_instance$props = instance.props) === null || _instance$props === void 0 ? void 0 : _instance$props.src) || ((_instance$props2 = instance.props) === null || _instance$props2 === void 0 ? void 0 : _instance$props2.href),\n    lineHeight: lineHeight ? lineHeight * fontSize : null\n  };\n  for (var i = 0; i < instance.children.length; i += 1) {\n    var child = instance.children[i];\n    if (isImage(child)) {\n      fragments.push({\n        string: String.fromCharCode(0xfffc),\n        attributes: (0, _extends2.default)({}, attributes, {\n          attachment: {\n            width: child.style.width || fontSize,\n            height: child.style.height || fontSize,\n            image: child.image.data\n          }\n        })\n      });\n    } else if (isTextInstance(child)) {\n      fragments.push({\n        string: (0, _transformText.default)(child.value, textTransform),\n        attributes: attributes\n      });\n    } else if (child) {\n      var _fragments;\n      (_fragments = fragments).push.apply(_fragments, getFragments(fontStore, child, attributes.link, level + 1));\n    }\n  }\n  for (var _i = 0; _i < PREPROCESSORS.length; _i += 1) {\n    var preprocessor = PREPROCESSORS[_i];\n    fragments = preprocessor(fragments);\n  }\n  return fragments;\n};\n/**\n * Get textkit attributed string from text node\n *\n * @param {Object} font store\n * @param {Object} instance node\n * @returns {Object} attributed string\n */\n\nvar getAttributedString = function getAttributedString(fontStore, instance) {\n  var fragments = getFragments(fontStore, instance);\n  return _attributedString.default.fromFragments(fragments);\n};\nvar _default = R.curryN(2, getAttributedString);\nexports.default = _default;","map":{"version":3,"names":["_interopRequireWildcard","require","default","_interopRequireDefault","exports","__esModule","_extends2","R","P","_attributedString","_emoji","_ignoreChars","_transformText","PREPROCESSORS","embedEmojis","isType","propEq","isImage","Image","isTextInstance","TextInstance","getFragments","fontStore","instance","parentLink","level","_instance$props","_instance$props2","string","fragments","_instance$style","style","_instance$style$color","color","_instance$style$fontF","fontFamily","fontWeight","fontStyle","_instance$style$fontS","fontSize","_instance$style$textA","textAlign","lineHeight","textDecoration","textDecorationColor","textDecorationStyle","textTransform","letterSpacing","textIndent","opacity","opts","obj","getFont","font","data","backgroundColor","attributes","align","indent","characterSpacing","strikeStyle","underlineStyle","underline","strike","strikeColor","underlineColor","link","props","src","href","i","children","length","child","push","String","fromCharCode","attachment","width","height","image","value","_fragments","apply","_i","preprocessor","getAttributedString","fromFragments","_default","curryN"],"sources":["C:/Users/user/restii_qr_generator/frontend/node_modules/@react-pdf/layout/lib/text/getAttributedString.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar P = _interopRequireWildcard(require(\"@react-pdf/primitives\"));\n\nvar _attributedString = _interopRequireDefault(require(\"@react-pdf/textkit/lib/attributedString\"));\n\nvar _emoji = require(\"./emoji\");\n\nvar _ignoreChars = _interopRequireDefault(require(\"./ignoreChars\"));\n\nvar _transformText = _interopRequireDefault(require(\"./transformText\"));\n\nvar PREPROCESSORS = [_ignoreChars.default, _emoji.embedEmojis];\nvar isType = R.propEq('type');\nvar isImage = isType(P.Image);\nvar isTextInstance = isType(P.TextInstance);\n/**\n * Get textkit fragments of given node object\n *\n * @param {Object} font store\n * @param {Object} instance node\n * @returns {Array} text fragments\n */\n\nvar getFragments = function getFragments(fontStore, instance, parentLink, level) {\n  var _instance$props, _instance$props2;\n\n  if (level === void 0) {\n    level = 0;\n  }\n\n  if (!instance) return [{\n    string: ''\n  }];\n  var fragments = [];\n  var _instance$style = instance.style,\n      _instance$style$color = _instance$style.color,\n      color = _instance$style$color === void 0 ? 'black' : _instance$style$color,\n      _instance$style$fontF = _instance$style.fontFamily,\n      fontFamily = _instance$style$fontF === void 0 ? 'Helvetica' : _instance$style$fontF,\n      fontWeight = _instance$style.fontWeight,\n      fontStyle = _instance$style.fontStyle,\n      _instance$style$fontS = _instance$style.fontSize,\n      fontSize = _instance$style$fontS === void 0 ? 18 : _instance$style$fontS,\n      _instance$style$textA = _instance$style.textAlign,\n      textAlign = _instance$style$textA === void 0 ? 'left' : _instance$style$textA,\n      lineHeight = _instance$style.lineHeight,\n      textDecoration = _instance$style.textDecoration,\n      textDecorationColor = _instance$style.textDecorationColor,\n      textDecorationStyle = _instance$style.textDecorationStyle,\n      textTransform = _instance$style.textTransform,\n      letterSpacing = _instance$style.letterSpacing,\n      textIndent = _instance$style.textIndent,\n      opacity = _instance$style.opacity;\n  var opts = {\n    fontFamily: fontFamily,\n    fontWeight: fontWeight,\n    fontStyle: fontStyle\n  };\n  var obj = fontStore ? fontStore.getFont(opts) : null;\n  var font = obj ? obj.data : fontFamily; // Don't pass main background color to textkit. Will be rendered by the render package instead\n\n  var backgroundColor = level === 0 ? null : instance.style.backgroundColor;\n  var attributes = {\n    font: font,\n    color: color,\n    opacity: opacity,\n    fontSize: fontSize,\n    backgroundColor: backgroundColor,\n    align: textAlign,\n    indent: textIndent,\n    characterSpacing: letterSpacing,\n    strikeStyle: textDecorationStyle,\n    underlineStyle: textDecorationStyle,\n    underline: textDecoration === 'underline' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strike: textDecoration === 'line-through' || textDecoration === 'underline line-through' || textDecoration === 'line-through underline',\n    strikeColor: textDecorationColor || color,\n    underlineColor: textDecorationColor || color,\n    link: parentLink || ((_instance$props = instance.props) === null || _instance$props === void 0 ? void 0 : _instance$props.src) || ((_instance$props2 = instance.props) === null || _instance$props2 === void 0 ? void 0 : _instance$props2.href),\n    lineHeight: lineHeight ? lineHeight * fontSize : null\n  };\n\n  for (var i = 0; i < instance.children.length; i += 1) {\n    var child = instance.children[i];\n\n    if (isImage(child)) {\n      fragments.push({\n        string: String.fromCharCode(0xfffc),\n        attributes: (0, _extends2.default)({}, attributes, {\n          attachment: {\n            width: child.style.width || fontSize,\n            height: child.style.height || fontSize,\n            image: child.image.data\n          }\n        })\n      });\n    } else if (isTextInstance(child)) {\n      fragments.push({\n        string: (0, _transformText.default)(child.value, textTransform),\n        attributes: attributes\n      });\n    } else if (child) {\n      var _fragments;\n\n      (_fragments = fragments).push.apply(_fragments, getFragments(fontStore, child, attributes.link, level + 1));\n    }\n  }\n\n  for (var _i = 0; _i < PREPROCESSORS.length; _i += 1) {\n    var preprocessor = PREPROCESSORS[_i];\n    fragments = preprocessor(fragments);\n  }\n\n  return fragments;\n};\n/**\n * Get textkit attributed string from text node\n *\n * @param {Object} font store\n * @param {Object} instance node\n * @returns {Object} attributed string\n */\n\n\nvar getAttributedString = function getAttributedString(fontStore, instance) {\n  var fragments = getFragments(fontStore, instance);\n  return _attributedString.default.fromFragments(fragments);\n};\n\nvar _default = R.curryN(2, getAttributedString);\n\nexports.default = _default;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}